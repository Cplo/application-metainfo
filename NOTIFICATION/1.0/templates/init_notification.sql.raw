DROP TABLE IF EXISTS nt_notification_recipient;
DROP TABLE IF EXISTS nt_notification;

CREATE TABLE nt_notification (
  `id`             BIGINT       NOT NULL PRIMARY KEY AUTO_INCREMENT,
  `message`        TEXT         NOT NULL,
  `level`          VARCHAR(20)  NOT NULL,
  `service_type`   VARCHAR(50)  NOT NULL,
  `application_id` VARCHAR(255) NOT NULL,
  `recipients`     TEXT         NOT NULL,
  `create_time`    DATETIME     NOT NULL
)ENGINE = InnoDB CHARSET = utf8;

CREATE TABLE nt_notification_recipient (
  `notification_id` BIGINT       NOT NULL,
  `recipient`       VARCHAR(200) NOT NULL,
  `if_read`         BOOLEAN      NOT NULL,
  FOREIGN KEY (`notification_id`) REFERENCES studio.nt_notification (`id`)
    ON DELETE CASCADE
)ENGINE = InnoDB CHARSET = utf8;

CREATE INDEX idx_notification_recipient ON nt_notification_recipient (recipient);
