---
name: TRANSPEDIA
version: 1.0-tdh50
global: false
namePrefix: Transpedia
friendlyName: "Transpedia"
dependencies:
- name: SEARCH
  minVersion: 1.0-tdh50
  maxVersion: 1.0-tdh50
dockerImage: "transwarp/transpedia:tdh500"
roles:
- name: TRANSPEDIA_SERVER
  friendlyName: "Transpedia Server"
  labelPrefix: "transpedia-server"
  category: MASTER
  env:
  - name: TRANSPEDIA_HOST
    value: ${service['transpedia.host']}
  - name: TRANSPEDIA_PORT
    value: ${service['transpedia.port']}
  - name: ES_ENABLE
    value: <#if dependencies.SEARCH??>false<#else>true</#if>
  - name: ELASTICSEARCH_HOSTS
    value: <#if dependencies.SEARCH??>${dependencies.SEARCH.roles.SEARCH_SERVER[0].hostname}<#else>0.0.0.0</#if>
  - name: ELASTICSEARCH_PORT
    value: 9200
  summaryPolicy: SOME
  mountPaths: []
  autoAssign:
  - advice: !<NumSeq> {"numSeq": [1]}
  suggestion:
  - criteria: !<Range> {"min": 1}
  validation:
  - criteria: !<Range> {"min": 1}
  operations: []

firstWizardConfigs:
- transpedia.host
- transpedia.port

healthChecks:
- category: DAEMON_CHECK
  intervalSeconds: 30
  method: !<K8sPod> {}
